- name: Clone yay
  git:
    repo: https://aur.archlinux.org/yay-bin.git
    dest: "{{ builddir }}/yay"
    update: true
  tags:
    - yay
    - aur

- name: Build and install yay
  command:
    chdir: "{{ builddir }}/yay"
    cmd: "makepkg -sfi --noconfirm"
    creates: /usr/bin/yay
  tags:
    - yay
    - aur

- name: Download ansible yay module
  become: true
  ansible.builtin.get_url:
    url: https://github.com/mnussbaum/ansible-yay/blob/4fd5ec87f3c3ec5366376b30317714fee7e20b06/yay
    dest: /usr/share/ansible/yay
  tags:
    - yay
    - aur
